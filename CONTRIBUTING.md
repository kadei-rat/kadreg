# Contributing to Kadreg

Thanks for contributing!

### Prerequisites

- [Erlang](https://www.erlang.org/downloads), the version specified in `.tool-versions`
- [Gleam](https://gleam.run/getting-started/installation/), the version specified in `.tool-versions`
- [PostgreSQL](https://www.postgresql.org/download/), at least version 10.

### First time setup

Run `./bin/setup-db.sh` to create the database and run migrations.

Set a DATABASE_URL environment variable as needed to allow kadreg to access your postgres instance. For example, if you are running a postgres instance on the default port which your user can connect to with no auth on the user "myname", and have created a database called `kadreg` using the setup script, then run:

    export DATABASE_URL='postgresql://myname@localhost/kadreg?sslmode=disable'

You may like to put this in a .env file and use `dotenv` to automatically load it into your shell.

### Running & testing

```sh
gleam run   # Run the project
gleam test  # Run the tests
```

### Database helpers

- `./bin/setup-db.sh` - creates dev and test databases and runs migrations on both
- `./bin/teardown-db.sh` - drops both databases
- `./bin/reset-db.sh` - drops, creates, and migrates dev and test databases

## Raising PRs

Feel free to do a PR to fix a bug or add a small feature if you're confident that it's the right direction. Also feel free to open an issue first to discuss the approach with me (@kadei-rat) first.

Any significant new logic should be covered by tests. Needless to say, the codebase should compile and the tests pass on any PR.

### LLM policy

You are welcome to use LLMs to help you write code, as with any other developer tool. But here's the thing: _you, not an LLM, are responsible for the quality of the code that is in a PR that you raise_. To raise a PR is to sign off that you, the human (or otherwise in the case of therians), believe it meets an adequate quality bar.

Any PR containing nonsense/broken code that has clearly been generated by an LLM with little or no human supervision or understanding will be closed and the author banned.

The bottleneck in development velocity is human judgement. Anyone can produce dozens of LLM generated PRs on demand for any number of genuinely-desirable new features, but that is only actually useful to the extent that the time of a human to go through and fix them up produces more value than the next best thing that person could be doing. LLMs must not be used to put an undue burden on the time of the maintainers to fix up your unreviewed generated code.
